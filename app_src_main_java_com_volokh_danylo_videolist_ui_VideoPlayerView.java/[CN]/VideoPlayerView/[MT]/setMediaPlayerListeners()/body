{
  if (SHOW_LOGS)   Logger.v(TAG,">> setMediaPlayerListeners");
synchronized (mReadyForPlaybackIndicator) {
    mMediaPlayer.setListener(new MediaPlayerWrapper.MainThreadMediaPlayerListener(){
      @Override public void onVideoSizeChangedMainThread(      int width,      int height){
        if (SHOW_LOGS)         Logger.v(TAG,">> onVideoSizeChangedMainThread, width " + width + ", height "+ height);
        if (width != 0 && height != 0) {
          setContentWidth(width);
          setContentHeight(height);
          onVideoSizeAvailable();
        }
 else {
          if (SHOW_LOGS)           Logger.w(TAG,"onVideoSizeChangedMainThread, size 0. Probably will be unable to start video");
synchronized (mReadyForPlaybackIndicator) {
            mReadyForPlaybackIndicator.setFailedToPrepareUiForPlayback(true);
            mReadyForPlaybackIndicator.notifyAll();
          }
        }
        if (mMediaPlayerListenerMainThread != null) {
          mMediaPlayerListenerMainThread.onVideoSizeChangedMainThread(width,height);
        }
        if (SHOW_LOGS)         Logger.v(TAG,"<< onVideoSizeChangedMainThread, width " + width + ", height "+ height);
      }
      private final Runnable mVideoCompletionBackgroundThreadRunnable=new Runnable(){
        @Override public void run(){
          mMediaPlayerListenerBackgroundThread.onVideoSizeChangedBackgroundThread(getContentHeight(),getContentWidth());
        }
      }
;
      @Override public void onVideoCompletionMainThread(){
        if (mMediaPlayerListenerMainThread != null) {
          mMediaPlayerListenerMainThread.onVideoCompletionMainThread();
        }
        if (mMediaPlayerListenerBackgroundThread != null) {
          mViewHandlerBackgroundThread.post(mVideoCompletionBackgroundThreadRunnable);
        }
      }
      private final Runnable mVideoPreparedBackgroundThreadRunnable=new Runnable(){
        @Override public void run(){
          mMediaPlayerListenerBackgroundThread.onVideoPreparedBackgroundThread();
        }
      }
;
      @Override public void onVideoPreparedMainThread(){
        if (mMediaPlayerListenerMainThread != null) {
          mMediaPlayerListenerMainThread.onVideoPreparedMainThread();
        }
        if (mMediaPlayerListenerBackgroundThread != null) {
          mViewHandlerBackgroundThread.post(mVideoPreparedBackgroundThreadRunnable);
        }
      }
      @Override public void onErrorMainThread(      final int what,      final int extra){
        if (SHOW_LOGS)         Logger.v(TAG,"onErrorMainThread, this " + VideoPlayerView.this);
switch (what) {
case MediaPlayer.MEDIA_ERROR_SERVER_DIED:
          if (SHOW_LOGS)           Logger.v(TAG,"onErrorMainThread, what MEDIA_ERROR_SERVER_DIED");
        printErrorExtra(extra);
      break;
case MediaPlayer.MEDIA_ERROR_UNKNOWN:
    if (SHOW_LOGS)     Logger.v(TAG,"onErrorMainThread, what MEDIA_ERROR_UNKNOWN");
  printErrorExtra(extra);
break;
}
if (mMediaPlayerListenerBackgroundThread != null) {
mViewHandlerBackgroundThread.post(new Runnable(){
@Override public void run(){
  mMediaPlayerListenerBackgroundThread.onErrorBackgroundThread(what,extra);
}
}
);
}
}
}
);
mMediaPlayer.setVideoStateListener(mVideoStateListener);
}
if (SHOW_LOGS) Logger.v(TAG,"<< setMediaPlayerListeners");
}

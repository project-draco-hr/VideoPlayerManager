{
  int duration=0;
synchronized (mState) {
switch (mState.get()) {
case END:
case IDLE:
case INITIALIZED:
case PREPARING:
      duration=0;
    break;
case PREPARED:
case STARTED:
case PAUSED:
case STOPPED:
case PLAYBACK_COMPLETED:
case ERROR:
  duration=mMediaPlayer.getDuration();
}
}
return duration;
}
